# yaml-language-server: $schema=../validator/scraper.schema.json
name: VRSpy

sceneByURL:
  - action: scrapeXPath
    url:
      - vrspy.com/video/
    scraper: sceneScraper

xPathScrapers:
  sceneScraper:
    scene:
      Title: //dl8-video/@title
      Date:
        selector: //div[@class="video-details-info-item"][contains(text(), "Release date:")]/span/text()
        postProcess:
          - parseDate: 2 January 2006
      Details:
        selector: //div[@class="show-more-text"]/p
        # I don't know how to preserve the blank lines in the p element
      Studio:
        Name:
          fixed: VRSpy
      Tags:
        Name:
          # >- means multiline, newlines ignored, no newline at the end
          # this allows multiple xpath expressions to be written/read more easily
          selector: >-
            //div[@class="video-categories"]/a//text()
            |
            //div[@class="video-details-info-item"][contains(text(), "Viewing angle:")]/span/text()
            |
            //div[@class="video-details-info-item"][contains(text(), "Resolution:")]/span/text()
            |
            //div[@class="video-details-info-item"][contains(text(), "Format:")]/span/text()
            |
            //div[@class="video-details-info-item"][contains(text(), "Directed by:")]/span/text()
          postProcess:
            - replace:
                # this is a "hack" to achieve a fixed value as well as the dynamic values,
                # where the "Directed by:" xpath above seems to always be VRSpy
                - regex: VRSpy
                  with: Virtual Reality
      Image:
        selector: &imageSel //div[@class="player-cover"]/img/@src
        postProcess:
          - replace:
              - regex: .*w=\d+/(.*)
                with: $1
              - regex: cover-details  # this is seen on the scene URL page but isn't really the cover image
                with: cover  # the actual scene cover images can be seen in scene listing, such as performer pages
      Performers:
        Name: //div[@class="video-actor-item"]/span/text()
      URL: //link[@rel="canonical"]/@href
      Code:
        selector: *imageSel
        postProcess:
          - replace:
              - regex: .*/videos/(\d+)/.*
                with: $1

# Last Updated June 3, 2025
