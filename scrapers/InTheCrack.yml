name: InTheCrack
sceneByURL:
  - action: scrapeJson
    url:
      - inthecrack.com/Collection/
    queryURLReplace:
      url:
        - regex: .+?(\d+)
          with: https://api.inthecrack.com/Collection/$1
    queryURL: "{url}"
    scraper: inTheCrack
jsonScrapers:
  inTheCrack:
    scene:
      Title:
        selector: "[id,title]"
        concat: " "
      Code: id
      Date: clips.0.releaseDate
      Details:
        selector: "{shootLocation,clips.#.title,clips.#.description}"
        postProcess:
          - javascript: |
              const {shootLocation, title, description} = JSON.parse(value)
              return ('Shoot Location: ' + shootLocation + '\n\n' + title.map((sub, i)
      Performers:
        Name:
          selector: title
          split: " & "
      Studio:
        Name:
          fixed: InTheCrack
      Image:
        selector: id
        postProcess:
          - replace:
              - regex: (.+)
                with: https://api.inthecrack.com/FileStore/images/posters/collections/$1.jpg
